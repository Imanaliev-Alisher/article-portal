@model ContentPortal.Models.Article
@{
    ViewData["Title"] = Model.Title;
}

<article>
    <h1 class="mb-3">@Model.Title</h1>

    <div class="mb-3">
        @if (Model.Category != null)
        {
            <a asp-controller="Articles" asp-action="Index" asp-route-categoryId="@Model.Category.Id" class="badge bg-primary text-decoration-none">
                @Model.Category.Name
            </a>
        }
    </div>

    @if (!string.IsNullOrEmpty(Model.ImagePath))
    {
        <div class="mb-4">
            <img src="@Model.ImagePath" alt="@Model.Title" class="img-fluid rounded" style="max-height: 500px; width: 100%; object-fit: cover;" />
        </div>
    }

    <div class="text-muted mb-3">
        <small>
            Автор: @(Model.User?.FullName ?? Model.User?.Email ?? "Аноним") |
            Опубликовано: @Model.PublishedAt.ToString("dd MMMM yyyy, HH:mm")
        </small>
    </div>

    <hr />

    <div class="article-content mb-4" style="white-space: pre-wrap;">
        @Model.Content
    </div>

    <hr />

    <div class="d-flex gap-2">
        <a asp-action="Index" class="btn btn-secondary">Назад к списку</a>
        
        @if (User.Identity?.IsAuthenticated == true && Model.UserId == User.FindFirstValue(System.Security.Claims.ClaimTypes.NameIdentifier))
        {
            <a asp-action="Edit" asp-route-id="@Model.Id" class="btn btn-primary">Редактировать</a>
            <a asp-action="Delete" asp-route-id="@Model.Id" class="btn btn-danger">Удалить</a>
        }
    </div>
</article>
